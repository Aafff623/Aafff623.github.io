<!DOCTYPE html>
<!-- 语言默认是中文 -->
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <!-- 多设备显示 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>简易网页记事本</title>
    <!-- 引入 Bootstrap CSS打包的组件, FontAwesome图标库 自定义CSS(覆盖用) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 引入Markdown解析库 -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<!-- --------------------正文代码----------------------- -->

<body>
    <!-- 顶部导航 nav(Bootstrap导航组件类) top-navbar自定义样式 -->
    <nav class="navbar top-navbar navbar-expand shadow-sm">
        <!-- 导航栏目的内容 -->
        <!-- 全宽容器(100%) 内容自适应浏览器的宽度-->
        <div class="container-fluid">
            <!-- 左侧品牌标识和菜单切换按钮 -->
            <!-- 元素Flex布局(按照Flexbox排列) 并 垂直居中显示 -->
            <div class="d-flex align-items-center">
                <!-- Bootstrap按钮样式,小尺寸,浅灰色,右边距0.5rem边距 -->
                <button class="btn btn-sm btn-light me-2 btn-toggle-sidebar" id="toggleSidebar">
                    <!-- bars是awesome中三横线菜单图标 -->
                    <i class="fas fa-bars"></i>
                </button>
                <!-- 导航栏样式logo(brand),加粗,蓝色 -->
                <a class="navbar-brand fw-bold text-primary" href="#">
                    <!-- Awesome-fas(风格),书本打开图标 -->
                    <i class="fas fa-book-open me-2"></i>简易记事本
                </a>
            </div>
            <!-- 右侧功能区域 -->
            <div class="d-flex align-items-center">
                <!-- 搜索框 -->
                <div class="input-group me-3 d-none d-md-flex">
                    <input type="text" class="form-control search-box" placeholder="搜索笔记..." id="searchInput">
                    <span class="input-group-text bg-transparent border-0">
                        <i class="fas fa-search"></i>
                    </span>
                </div>
                <!-- 设置下拉菜单 -->
                <div class="dropdown">
                    <button class="btn btn-light dropdown-toggle" type="button" id="settingsDropdown" data-bs-toggle="dropdown">
                        <i class="fas fa-cog"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="#" id="themeToggle"><i class="fas fa-moon me-2"></i>切换主题</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item font-size-option" href="#" data-size="small"><i class="fas fa-font me-2"></i>小字体</a></li>
                        <li><a class="dropdown-item font-size-option" href="#" data-size="medium"><i class="fas fa-font me-2"></i>中字体</a></li>
                        <li><a class="dropdown-item font-size-option" href="#" data-size="large"><i class="fas fa-font me-2"></i>大字体</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" id="exportAllBtn"><i class="fas fa-file-export me-2"></i>导出所有笔记</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" id="trashBtn"><i class="fas fa-trash-alt me-2"></i>回收站</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" id="aboutBtn"><i class="fas fa-info-circle me-2"></i>关于</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主区域 main-container自定义容器类,设置flex布局 -->
    <div class="main-container">
        <!-- 左侧列表 aside notes-sidebar自定义类-->
        <aside class="notes-sidebar" id="notesSidebar">
            <!-- 设置内边距padding p <-> (四周) 1rem -->
            <div class="sidebar-header">
                <!-- 宽度100%,元素在容器中占满 -->
                <button class="btn btn-new-note w-100" id="newNoteBtn">
                    <!-- plus是加号图标 -->
                    <i class="fas fa-plus me-2"></i>新建笔记
                </button>
                <!-- 移动端搜索框 -->
                <div class="input-group mt-2 d-md-none">
                    <input type="text" class="form-control search-box" placeholder="搜索笔记..." id="mobileSearchInput">
                    <span class="input-group-text bg-transparent border-0">
                        <i class="fas fa-search"></i>
                    </span>
                </div>
            </div>
            <!-- 添加笔记列表的区域 -->
            <div class="notes-list" id="notesList">
                <!-- 笔记列表将通过JavaScript动态生成 -->
            </div>
            <!-- 添加底部统计 -->
            <div class="stats-bar">
                <small><i class="fas fa-sticky-note me-1"></i> <span id="notesCount">0</span> 条笔记</small>
                <small class="ms-3"><i class="fas fa-search me-1"></i> <span id="searchStatus">全部</span></small>
            </div>
        </aside>

        <!-- 右侧编辑器 网页的主要区域,一个网页一个main -->
        <main class="editor-container">
            <!-- 设置编辑区域的样式,布局,内容 -->
            <div class="editor-header d-flex justify-content-between align-items-center">
                <!-- form-control表单控件样式 -->
                <input type="text" class="note-title-input flex-grow-1" placeholder="笔记标题" id="noteTitleInput">
                <div class="editor-actions ms-3">
                    <button class="btn btn-sm btn-outline-secondary me-2" id="previewToggleBtn" title="切换预览">
                        <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn btn-sm btn-outline-secondary me-2" id="exportBtn" title="导出笔记">
                        <i class="fas fa-download"></i>
                    </button>
                    <div class="dropdown d-inline-block">
                        <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" id="tagDropdown" data-bs-toggle="dropdown" title="添加标签">
                            <i class="fas fa-tag"></i>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" id="tagList">
                            <li><a class="dropdown-item" href="#" data-tag="工作">🏢 工作</a></li>
                            <li><a class="dropdown-item" href="#" data-tag="学习">📚 学习</a></li>
                            <li><a class="dropdown-item" href="#" data-tag="生活">🏠 生活</a></li>
                            <li><a class="dropdown-item" href="#" data-tag="想法">💡 想法</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" data-tag="">❌ 清除标签</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 标签显示区域 -->
            <div class="editor-tags p-2 border-top" id="editorTags" style="display: none;">
                <span class="badge bg-primary me-1" id="currentTag"></span>
            </div>

            <div class="editor-body">
                <textarea class="note-content-textarea" placeholder="开始编写您的内容...支持Markdown语法，例如：\n\n# 标题\n\n**粗体**\n\n![图片描述](图片URL)" id="noteContentTextarea"></textarea>
                <div class="markdown-preview p-3" id="markdownPreview" style="display: none;"></div>
            </div>

            <!-- 添加底部状态栏 -->
            <div class="stats-bar d-flex justify-content-between">
                <small><i class="fas fa-keyboard me-1"></i> 字数: <span id="wordCount">0</span> (字符: <span id="charCount">0</span>)</small>
                <small>最后保存: <span id="lastSaved">-</span></small>
            </div>
        </main>
    </div>

    <!-- 关于模态框 -->
    <div class="modal fade" id="aboutModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">关于简易记事本</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>简易记事本是一个基于Web的笔记应用，使用纯前端技术实现。</p>
                    <p><strong>功能特点：</strong></p>
                    <ul>
                        <li>创建、编辑和删除笔记</li>
                        <li>实时自动保存</li>
                        <li>搜索笔记内容和标签</li>
                        <li>亮色/暗色主题切换</li>
                        <li>笔记标签分类</li>
                        <li>Markdown格式支持</li>
                        <li>图片插入功能</li>
                        <li>回收站功能</li>
                        <li>笔记导出功能</li>
                        <li>本地存储，保护隐私</li>
                    </ul>
                    <p class="mb-0"><strong>技术栈：</strong> HTML5, CSS3, JavaScript, Bootstrap 5, Font Awesome, Marked.js</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 回收站模态框 -->
    <div class="modal fade" id="trashModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">回收站</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="trashNotesList">
                        <!-- 回收站中的笔记将在这里显示 -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-danger" id="emptyTrashBtn">清空回收站</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 提示信息Toast -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <i class="fas fa-info-circle me-2 text-primary"></i>
                <strong class="me-auto">系统提示</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body" id="toastMessage">
                操作成功
            </div>
        </div>
    </div>

    <!-- script区域 让浏览器先加载和解析html 和 css,使得性能优化,放置JavaScript阻塞污染 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>